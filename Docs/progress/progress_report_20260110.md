# è¿›å±•æŠ¥å‘Š - 2026å¹´1æœˆ10æ—¥

## ğŸ“‹ æœ¬æ¬¡å·¥ä½œå†…å®¹

### ç¬¬ä¸€éƒ¨åˆ†ï¼šç”Ÿäº§ç¯å¢ƒéƒ¨ç½²é…ç½®ä¼˜åŒ–

#### æ¦‚è¿°
æ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼Œå¯¹ AICSL ç³»ç»Ÿè¿›è¡Œäº†å®Œæ•´çš„ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²é…ç½®ä¼˜åŒ–ã€‚åˆ›å»ºäº†ä¸€å¥—ä¼ä¸šçº§çš„éƒ¨ç½²æ–¹æ¡ˆï¼ŒåŒ…å«å®‰å…¨åŠ å›ºã€è‡ªåŠ¨åŒ–è„šæœ¬ã€SSL é…ç½®ç­‰å…³é”®ç»„ä»¶ã€‚

#### å·²å®Œæˆçš„å·¥ä½œ

##### 1. ç”Ÿäº§ç¯å¢ƒ Docker Compose é…ç½®
**æ–‡ä»¶**: `docker-compose.production.yml`

##### 2. ç¯å¢ƒå˜é‡æ¨¡æ¿
**æ–‡ä»¶**: `.env.production.example`

##### 3. ç”Ÿäº§ç¯å¢ƒ Nginx é…ç½®
**æ–‡ä»¶**: `nginx/nginx.production.conf`

##### 4. MongoDB åˆå§‹åŒ–è„šæœ¬
**æ–‡ä»¶**: `scripts/mongo-init.js`

##### 5. ä¸€ç«™å¼éƒ¨ç½²è„šæœ¬
**æ–‡ä»¶**: `scripts/deploy.sh`

##### 6. è‡ªåŠ¨å¤‡ä»½è„šæœ¬
**æ–‡ä»¶**: `scripts/backup.sh`

##### 7. ç”Ÿäº§éƒ¨ç½²æ–‡æ¡£
**æ–‡ä»¶**: `PRODUCTION_DEPLOYMENT.md`

---

### ç¬¬äºŒéƒ¨åˆ†ï¼šRAG çŸ¥è¯†åº“ç®¡ç†åŠŸèƒ½

#### æ¦‚è¿°
åœ¨æ•™å¸ˆç®¡ç†é¡µé¢å®ç°äº† RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰çŸ¥è¯†åº“çš„æ–‡ä»¶æ·»åŠ å’Œåˆ†æåŠŸèƒ½ï¼Œå…è®¸æ•™å¸ˆç®¡ç† AI åŠ©æ•™çš„çŸ¥è¯†æ¥æºã€‚

#### å·²å®Œæˆçš„å·¥ä½œ

##### 1. åç«¯ RAG API
**æ–‡ä»¶**: `backend/app/api/v1/rag.py`

åŠŸèƒ½ï¼š
- `GET /api/v1/rag/stats` - è·å–çŸ¥è¯†åº“ç»Ÿè®¡ä¿¡æ¯ï¼ˆæ–‡æ¡£æ•°ã€å‘é‡æ•°ã€è¦†ç›–é¡¹ç›®æ•°ï¼‰
- `GET /api/v1/rag/documents` - åˆ—å‡ºå·²ç´¢å¼•çš„æ–‡æ¡£
- `POST /api/v1/rag/documents` - æ·»åŠ æ–‡æ¡£åˆ°çŸ¥è¯†åº“è¿›è¡Œå‘é‡åŒ–
- `DELETE /api/v1/rag/documents/{resource_id}` - ä»çŸ¥è¯†åº“ç§»é™¤æ–‡æ¡£
- `POST /api/v1/rag/query` - æµ‹è¯•çŸ¥è¯†åº“æŸ¥è¯¢
- `POST /api/v1/rag/batch-index` - æ‰¹é‡ç´¢å¼•èµ„æº
- `GET /api/v1/rag/unindexed-resources` - è·å–æœªç´¢å¼•çš„èµ„æºåˆ—è¡¨

ç‰¹æ€§ï¼š
- æ”¯æŒ PDFã€Wordã€HTMLã€çº¯æ–‡æœ¬ç­‰å¤šç§æ–‡ä»¶æ ¼å¼
- åå°å¼‚æ­¥å¤„ç†æ–‡æ¡£å‘é‡åŒ–
- è‡ªåŠ¨æ–‡æœ¬åˆ†å—ï¼ˆå¯é…ç½®å—å¤§å°å’Œé‡å ï¼‰
- æƒé™æ§åˆ¶ï¼ˆä»…æ•™å¸ˆ/ç®¡ç†å‘˜å¯è®¿é—®ï¼‰

##### 2. å‰ç«¯ RAG æœåŠ¡
**æ–‡ä»¶**: `frontend/src/services/api/rag.ts`

##### 3. RAG çŸ¥è¯†åº“ç®¡ç†ç»„ä»¶
**æ–‡ä»¶**: `frontend/src/components/features/teacher/rag/RAGKnowledgeBase.tsx`

UI åŠŸèƒ½ï¼š
- ğŸ“Š ç»Ÿè®¡å¡ç‰‡ï¼šæ˜¾ç¤ºå·²ç´¢å¼•æ–‡æ¡£æ•°ã€æ–‡æœ¬å—æ•°ã€è¦†ç›–é¡¹ç›®æ•°ã€å‘é‡æ•°æ®é‡
- ğŸ“‹ å·²ç´¢å¼•æ–‡æ¡£åˆ—è¡¨ï¼šæ”¯æŒæŒ‰é¡¹ç›®ç­›é€‰ã€æŸ¥çœ‹çŠ¶æ€ã€é‡æ–°ç´¢å¼•ã€ç§»é™¤
- ğŸ“‚ å¾…ç´¢å¼•èµ„æºåˆ—è¡¨ï¼šæ˜¾ç¤ºæœªç´¢å¼•çš„è¯¾ç¨‹èµ„æºï¼Œæ”¯æŒå•ä¸ªæˆ–æ‰¹é‡æ·»åŠ 
- ğŸ” æŸ¥è¯¢æµ‹è¯•å¯¹è¯æ¡†ï¼šæµ‹è¯• RAG æ£€ç´¢æ•ˆæœ
- ğŸ¨ ç²¾ç¾çš„ UI è®¾è®¡ï¼šæ¸å˜å¤´éƒ¨ã€çŠ¶æ€å¾½ç« ã€è¡¨æ ¼å¸ƒå±€

##### 4. è·¯ç”±é…ç½®
**æ–‡ä»¶**: `frontend/src/config/routes.ts`
- æ–°å¢è·¯ç”±: `RAG_KNOWLEDGE_BASE: '/teacher/rag-knowledge'`

**æ–‡ä»¶**: `frontend/src/router/index.tsx`
- æ³¨å†Œ RAG çŸ¥è¯†åº“é¡µé¢è·¯ç”±

##### 5. ä¾§è¾¹æ å¯¼èˆª
**æ–‡ä»¶**: `frontend/src/pages/teacher/TeacherDashboard.tsx`
- åœ¨è¯¾ç¨‹èµ„æºä¸‹æ–¹æ·»åŠ  "RAG çŸ¥è¯†åº“" å¯¼èˆªé¡¹
- ä½¿ç”¨ Database å›¾æ ‡

---

## ğŸ“ æ–°å¢/ä¿®æ”¹æ–‡ä»¶åˆ—è¡¨

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
```
AICSL_main/
â”œâ”€â”€ docker-compose.production.yml    # ç”Ÿäº§ç¯å¢ƒç¼–æ’é…ç½®
â”œâ”€â”€ .env.production.example          # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ PRODUCTION_DEPLOYMENT.md         # ç”Ÿäº§éƒ¨ç½²æŒ‡å—
â”œâ”€â”€ nginx/
â”‚   â””â”€â”€ nginx.production.conf        # ç”Ÿäº§Nginxé…ç½®
â””â”€â”€ scripts/
    â”œâ”€â”€ deploy.sh                    # ä¸€ç«™å¼éƒ¨ç½²è„šæœ¬
    â”œâ”€â”€ backup.sh                    # è‡ªåŠ¨å¤‡ä»½è„šæœ¬
    â””â”€â”€ mongo-init.js                # MongoDBåˆå§‹åŒ–è„šæœ¬
```

### RAG çŸ¥è¯†åº“ç®¡ç†
```
AICSL_main/
â”œâ”€â”€ backend/
â”‚   â””â”€â”€ app/
â”‚       â”œâ”€â”€ api/v1/rag.py            # RAG API ç«¯ç‚¹
â”‚       â””â”€â”€ main.py                  # æ³¨å†Œ RAG è·¯ç”±
â””â”€â”€ frontend/
    â””â”€â”€ src/
        â”œâ”€â”€ services/api/rag.ts      # RAG æœåŠ¡ API
        â”œâ”€â”€ components/features/teacher/rag/
        â”‚   â””â”€â”€ RAGKnowledgeBase.tsx # RAG ç®¡ç†ç»„ä»¶
        â”œâ”€â”€ config/routes.ts         # è·¯ç”±é…ç½®
        â”œâ”€â”€ router/index.tsx         # è·¯ç”±æ³¨å†Œ
        â””â”€â”€ pages/teacher/TeacherDashboard.tsx # ä¾§è¾¹æ å¯¼èˆª
```

---

### ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ™ºèƒ½ä½“é…ç½®ç®¡ç†åŠŸèƒ½

#### æ¦‚è¿°
åœ¨æ•™å¸ˆç®¡ç†é¡µé¢å®ç°äº†å¤šæ™ºèƒ½ä½“é…ç½®ç®¡ç†åŠŸèƒ½ï¼Œå…è®¸æ•™å¸ˆè‡ªå®šä¹‰ AI åŠ©æ•™çš„è§’è‰²ã€è¡Œä¸ºå’Œ System Promptã€‚

#### å·²å®Œæˆçš„å·¥ä½œ

##### 1. åç«¯æ•°æ®æ¨¡å‹
**æ–‡ä»¶**: `backend/app/repositories/agent_config.py`

æ•°æ®ç»“æ„ï¼š
- `name` - æ™ºèƒ½ä½“æ ‡è¯†ï¼ˆè‹±æ–‡ï¼‰
- `display_name` - æ˜¾ç¤ºåç§°
- `description` - è§’è‰²æè¿°
- `system_prompt` - ç³»ç»Ÿæç¤ºè¯
- `enabled` - æ˜¯å¦å¯ç”¨
- `icon` / `color` - è§†è§‰é…ç½®
- `temperature` / `max_tokens` - LLM å‚æ•°
- `role_type` - è§’è‰²ç±»å‹ï¼ˆsupervisor/specialist/criticï¼‰
- `is_system` - æ˜¯å¦ä¸ºç³»ç»Ÿé¢„è®¾æ™ºèƒ½ä½“

é»˜è®¤æ™ºèƒ½ä½“ï¼š
1. ğŸ§  é¦–å¸­å¼•å¯¼å‘˜ (supervisor) - åè°ƒæ‰€æœ‰æ™ºèƒ½ä½“
2. ğŸ“ é¢†åŸŸä¸“å®¶ (domain_expert) - ä¸“ä¸šçŸ¥è¯†è§£ç­”
3. ğŸ‘¥ åä½œåŠ©æ‰‹ (collaboration_assistant) - é¡¹ç›®ç®¡ç†
4. â“ è‹æ ¼æ‹‰åº•å¯¼å¸ˆ (socratic_tutor) - æ‰¹åˆ¤æ€§æ€ç»´åŸ¹å…»
5. â¤ï¸ å¿ƒç†è¾…å¯¼å‘˜ (emotional_support) - æƒ…æ„Ÿæ”¯æŒ

##### 2. åç«¯ API
**æ–‡ä»¶**: `backend/app/api/v1/agents.py`

ç«¯ç‚¹ï¼š
- `GET /api/v1/agents` - åˆ—å‡ºæ‰€æœ‰æ™ºèƒ½ä½“
- `GET /api/v1/agents/{id}` - è·å–å•ä¸ªæ™ºèƒ½ä½“
- `POST /api/v1/agents` - åˆ›å»ºæ–°æ™ºèƒ½ä½“
- `PUT /api/v1/agents/{id}` - æ›´æ–°æ™ºèƒ½ä½“
- `DELETE /api/v1/agents/{id}` - åˆ é™¤è‡ªå®šä¹‰æ™ºèƒ½ä½“
- `POST /api/v1/agents/{id}/toggle` - åˆ‡æ¢å¯ç”¨çŠ¶æ€
- `POST /api/v1/agents/{id}/duplicate` - å¤åˆ¶æ™ºèƒ½ä½“

##### 3. å‰ç«¯ç»„ä»¶
**æ–‡ä»¶**: `frontend/src/components/features/teacher/agents/AgentManager.tsx`

åŠŸèƒ½ï¼š
- ğŸ“Š æ™ºèƒ½ä½“ç»Ÿè®¡å¡ç‰‡ï¼ˆæ€»æ•°ã€å·²å¯ç”¨ã€ç³»ç»Ÿé¢„è®¾ï¼‰
- ğŸ“‹ æ™ºèƒ½ä½“åˆ—è¡¨ï¼Œå±•ç¤ºè§’è‰²ä¿¡æ¯å’Œ Prompt
- âœï¸ ç¼–è¾‘å¯¹è¯æ¡†ï¼šä¿®æ”¹åç§°ã€æè¿°ã€Promptã€LLM å‚æ•°ç­‰
- â• åˆ›å»ºå¯¹è¯æ¡†ï¼šå®šä¹‰æ–°çš„è‡ªå®šä¹‰æ™ºèƒ½ä½“
- ğŸ”„ å¯ç”¨/ç¦ç”¨åˆ‡æ¢
- ğŸ“‹ å¤åˆ¶åŠŸèƒ½
- ğŸ¨ é¢œè‰²é€‰æ‹©å™¨

##### 4. è·¯ç”±å’Œå¯¼èˆª
- è·¯ç”±: `/teacher/agent-config`
- ä¾§è¾¹æ : "æ™ºèƒ½ä½“é…ç½®" (Brain å›¾æ ‡)

---

## ğŸ“ å®Œæ•´æ–‡ä»¶åˆ—è¡¨

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
```
AICSL_main/
â”œâ”€â”€ docker-compose.production.yml
â”œâ”€â”€ .env.production.example
â”œâ”€â”€ PRODUCTION_DEPLOYMENT.md
â”œâ”€â”€ nginx/nginx.production.conf
â””â”€â”€ scripts/
    â”œâ”€â”€ deploy.sh
    â”œâ”€â”€ backup.sh
    â””â”€â”€ mongo-init.js
```

### RAG çŸ¥è¯†åº“ç®¡ç†
```
AICSL_main/
â”œâ”€â”€ backend/app/api/v1/rag.py
â””â”€â”€ frontend/src/
    â”œâ”€â”€ services/api/rag.ts
    â””â”€â”€ components/features/teacher/rag/RAGKnowledgeBase.tsx
```

### æ™ºèƒ½ä½“é…ç½®ç®¡ç†
```
AICSL_main/
â”œâ”€â”€ backend/
â”‚   â””â”€â”€ app/
â”‚       â”œâ”€â”€ repositories/agent_config.py
â”‚       â”œâ”€â”€ api/v1/agents.py
â”‚       â””â”€â”€ main.py (æ³¨å†Œè·¯ç”±)
â””â”€â”€ frontend/
    â””â”€â”€ src/
        â”œâ”€â”€ services/api/agents.ts
        â”œâ”€â”€ components/features/teacher/agents/AgentManager.tsx
        â”œâ”€â”€ config/routes.ts
        â”œâ”€â”€ router/index.tsx
        â””â”€â”€ pages/teacher/TeacherDashboard.tsx
```

---

## ğŸ”œ åç»­å»ºè®®

1. **æ™ºèƒ½ä½“æµç¨‹è®¾è®¡**
   - å®ç°å¯è§†åŒ–çš„æ™ºèƒ½ä½“å·¥ä½œæµç¼–è¾‘å™¨
   - æ”¯æŒæ™ºèƒ½ä½“é—´çš„å¯¹è¯æµè½¬è§„åˆ™é…ç½®

2. **æ™ºèƒ½ä½“ä¸ RAG é›†æˆ**
   - è®©æ•™å¸ˆæŒ‡å®šæ¯ä¸ªæ™ºèƒ½ä½“å¯è®¿é—®çš„çŸ¥è¯†åº“èŒƒå›´

3. **æ™ºèƒ½ä½“æ•ˆæœåˆ†æ**
   - è®°å½•æ™ºèƒ½ä½“å¯¹è¯æ—¥å¿—
   - åˆ†ææ™ºèƒ½ä½“å›å¤è´¨é‡

---

**æ–‡æ¡£ç¼–å†™æ—¶é—´**: 2026-01-10 19:55

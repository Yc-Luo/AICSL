# å¤šæ™ºèƒ½ä½“åä½œå­¦ä¹ ç³»ç»Ÿ (AICSL) ä¼˜åŒ–è®¾è®¡å»ºè®®

åŸºäº AICSL å½“å‰çš„æ¶æ„ (FastAPI + Next.js + MongoDB 7.0 + Redis)ï¼Œä¸ºäº†ä»å•ä¸€çš„ "AI åŠ©æ‰‹" è¿›åŒ–ä¸ºçœŸæ­£çš„ **å¤šæ™ºèƒ½ä½“åä½œç³»ç»Ÿ (Multi-Agent System)**ï¼Œå»ºè®®ä»ä»¥ä¸‹å››ä¸ªç»´åº¦è¿›è¡Œæ·±åº¦ä¼˜åŒ–ã€‚

## 1. æ™ºèƒ½ä½“è§’è‰²ä¸“é—¨åŒ– (Role Specialization)

ä¼ ç»Ÿçš„ "One-Size-Fits-All" (å…¨èƒ½å‹) åŠ©æ‰‹å¾€å¾€éš¾ä»¥å…¼é¡¾æ•™å­¦å¼•å¯¼å’Œä¸“ä¸šçŸ¥è¯†è§£ç­”ã€‚å»ºè®®å°† AI æ‹†åˆ†ä¸ºä¸€å…·æœ‰ä¸åŒç›®æ ‡ã€æƒé™å’Œäººæ ¼çš„æ™ºèƒ½ä½“å›¢é˜Ÿ (Agent Team)ï¼š

### ğŸ•µï¸ åä½œå®¡è®¡å‘˜ (The Silent Auditor)
*   **ç‰¹æ€§**ï¼š**éšå½¢**ã€åå°è¿è¡Œã€åªè¯»æƒé™ã€‚
*   **æ ¸å¿ƒèŒè´£**ï¼šä¸ç›´æ¥ä¸ç”¨æˆ·å¯¹è¯ï¼Œè€Œæ˜¯å®æ—¶ç›‘æ§ `behavior_logs` (è¡Œä¸ºæµ) å’Œ Yjs åä½œæ•°æ®ã€‚
*   **å…³é”®èƒ½åŠ›**ï¼š
    *   **æ­ä¾¿è½¦æ£€æµ‹ (Free-rider Detection)**ï¼šè¯†åˆ«é•¿æ—¶é—´æœªè¿›è¡Œæœ‰æ•ˆæ“ä½œï¼ˆå¦‚æœªç¼–è¾‘æ–‡æ¡£ã€æœªå‘è¨€ï¼‰çš„æˆå‘˜ã€‚
    *   **è¯è¯­æƒå„æ–­æ£€æµ‹**ï¼šè¯†åˆ«æŸä½æˆå‘˜å‘è¨€è¿‡é¢‘å¯¼è‡´å…¶ä»–äººæ— æ³•å‚ä¸çš„æƒ…å†µã€‚
*   **è¾“å‡º**ï¼šå‘ "å¼•å¯¼è€…" å‘é€ç³»ç»Ÿä¿¡å· (Signal)ï¼Œä¾‹å¦‚ `{"type": "inactive_alert", "target_user": "user_123"}`ã€‚

### ğŸ‘©â€ğŸ« å¼•å¯¼è€… (The Facilitator)
*   **ç‰¹æ€§**ï¼šäº²å’ŒåŠ›å¼ºã€è‹æ ¼æ‹‰åº•å¼æ•™å­¦ã€‚
*   **æ ¸å¿ƒèŒè´£**ï¼šç»´æŠ¤å°ç»„è®¨è®ºçš„å¥åº·åº¦å’Œæ´»è·ƒåº¦ã€‚**åŸåˆ™ä¸Šä¸ç›´æ¥ç»™å‡ºç­”æ¡ˆ**ã€‚
*   **è§¦å‘æœºåˆ¶**ï¼šæ”¶åˆ° "å®¡è®¡å‘˜" çš„ä¿¡å·ï¼Œæˆ–æ£€æµ‹åˆ°è®¨è®ºé™·å…¥é•¿æ—¶é—´æ²‰é»˜ã€‚
*   **è¯æœ¯ç¤ºä¾‹**ï¼š
    *   "å¤§å®¶ä¼¼ä¹å¯¹åº”åŠ›åˆ†æè¿™éƒ¨åˆ†æœ‰ç‚¹å¡ä½äº†ï¼Œ@UserAï¼Œä½ è§‰å¾—ä¹‹å‰æåˆ°çš„å…¬å¼åœ¨è¿™é‡Œé€‚ç”¨å—ï¼Ÿ"
    *   "æˆ‘çœ‹ @UserB å·²ç»ç”»å‡ºäº†æ¡†æ¶ï¼Œ@UserC ä½ èƒ½è¡¥å……ä¸€ä¸‹ç»†èŠ‚å—ï¼Ÿ"

### ğŸ“š é¢†åŸŸä¸“å®¶ (The Domain Expert)
*   **ç‰¹æ€§**ï¼šä¸¥è°¨ã€å‡†ç¡®ã€å·¥å…·å±æ€§å¼ºã€‚
*   **æ ¸å¿ƒèŒè´£**ï¼šä½œä¸ºçŸ¥è¯†åº“æ¥å£ã€‚æ”¯æŒ RAG (æ£€ç´¢å¢å¼ºç”Ÿæˆ)ï¼ŒåŸºäºä¸Šä¼ çš„ PDF/æ–‡æ¡£æä¾›å®šä¹‰ã€å…¬å¼å’Œå‚è€ƒæ–‡çŒ®ã€‚
*   **è§¦å‘æœºåˆ¶**ï¼šç”¨æˆ·ä¸»åŠ¨ `@Expert` å¬å”¤ï¼Œæˆ– "å¼•å¯¼è€…" åˆ¤å®šéœ€è¦å¼•å…¥å¤–éƒ¨çŸ¥è¯†æ—¶ã€‚

### ğŸ˜ˆ æ‰¹åˆ¤è€… (The Devil's Advocate)
*   **ç‰¹æ€§**ï¼šé€»è¾‘çŠ€åˆ©ã€æ‰¹åˆ¤æ€§æ€ç»´ã€‚
*   **æ ¸å¿ƒèŒè´£**ï¼šé˜²æ­¢ç¾¤ä½“è¿·æ€ (Groupthink)ã€‚å½“å°ç»„è¿‡å¿«è¾¾æˆä¸€è‡´ï¼Œæˆ–è®ºè¯è¿‡ç¨‹å­˜åœ¨æ˜æ˜¾é€»è¾‘æ¼æ´æ—¶ä»‹å…¥ã€‚
*   **è¯æœ¯ç¤ºä¾‹**ï¼š
    *   "ä½ ä»¬çš„æ–¹æ¡ˆçœ‹ä¼¼å®Œç¾ï¼Œä½†å¦‚æœè€ƒè™‘åˆ°ç½‘ç»œå»¶è¿Ÿè¶…è¿‡ 500ms çš„æƒ…å†µï¼Œè¿™ä¸ªæ¶æ„è¿˜èƒ½å·¥ä½œå—ï¼Ÿ"

---

## 2. äº¤äº’ä¸åä½œæœºåˆ¶ (Interaction & Collaboration)

æ™ºèƒ½ä½“ä¹‹é—´éœ€è¦åä½œï¼Œè€Œä¸æ˜¯å„è‡ªä¸ºæˆ˜ã€‚

### é»‘æ¿æ¨¡å¼ (Blackboard Pattern)
åˆ©ç”¨ç°æœ‰çš„ **Redis** ä½œä¸ºå…±äº« "é»‘æ¿"ã€‚
1.  **åœºæ™¯**ï¼šå­¦ç”Ÿæå‡ºäº†ä¸€ä¸ªæå…·æŒ‘æˆ˜æ€§çš„é—®é¢˜ã€‚
2.  **åä½œæµ**ï¼š
    *   **å®¡è®¡å‘˜** æ•æ‰åˆ°é—®é¢˜ï¼Œå¹¶åœ¨ Redis æ ‡è®° `Task: Answer_Complex_Question`ã€‚
    *   **ä¸“å®¶** åœ¨åå°ç”Ÿæˆè¯¦ç»†çš„æŠ€æœ¯è§£é‡Š (Draft)ï¼Œå†™å…¥ Redisã€‚
    *   **å¼•å¯¼è€…** è¯»å– Draftï¼Œåˆ¤æ–­å†…å®¹è¿‡äºæ·±å¥¥ï¼Œå°†å…¶ "è½¬è¯‘" ä¸ºå¼•å¯¼æ€§é—®é¢˜åé¦ˆç»™å­¦ç”Ÿã€‚

### æ™ºèƒ½ä½“è¾©è®º (Agent Debate)
å¯¹äºå¼€æ”¾æ€§è®®é¢˜ï¼Œå¼•å…¥è¿™ä¸€æœºåˆ¶å¯ä»¥å±•ç¤ºå¤šè§’åº¦æ€ç»´ï¼š
*   **è§¦å‘**ï¼šå­¦ç”Ÿè®¨è®ºé™·å…¥åƒµå±€æˆ–è§‚ç‚¹å•ä¸€ã€‚
*   **å½¢å¼**ï¼šèŠå¤©çª—å£å‡ºç°ä¸¤ä¸ª AI è§’è‰² (å¦‚ "æ­£æ–¹ä»£è¡¨" å’Œ "åæ–¹ä»£è¡¨") è¿›è¡Œ 2-3 è½®çŸ­ä¿ƒè¾©è®ºã€‚
*   **ç›®çš„**ï¼šå‘å­¦ç”Ÿå±•ç¤ºå¦‚ä½•ç”¨è®ºæ®æ”¯æ’‘è§‚ç‚¹ï¼Œç„¶åå°†è¯è¯­æƒäº¤è¿˜ç»™å­¦ç”Ÿã€‚

---

## 3. åŸºäºæ•°æ®çš„æ™ºèƒ½å¹²é¢„ (Data-Driven Intervention)

å……åˆ†åˆ©ç”¨ MongoDB 7.0 çš„ `timeseries` é›†åˆä¸èšåˆèƒ½åŠ›ã€‚

### å®æ—¶çŠ¶æ€ä»ªè¡¨ç›˜ (Live Context Awareness)
AI çš„ Prompt ä¸åº”åªæœ‰ç”¨æˆ·å½“å‰çš„è¾“å…¥ï¼Œè¿˜åº”åŒ…å«åŠ¨æ€ä¸Šä¸‹æ–‡ï¼š
*   **Prompt æ³¨å…¥ç¤ºä¾‹**ï¼š
    ```text
    [Context Info]
    - Current Task: "Whiteboard Architecture Design"
    - Time Remaining: 15 mins
    - Group Status: "High Activity" but "Low Collaboration" (Users working separately)
    - User A: Active (Editing Whiteboard)
    - User B: Idle (5 mins)
    ```
*   **å®ç°**ï¼š`ai_service` åœ¨æ„å»º Prompt å‰ï¼Œå…ˆæŸ¥è¯¢ `behavior_logs` çš„èšåˆç»“æœã€‚

### è‡ªé€‚åº”è„šæ‰‹æ¶ (Adaptive Scaffolding)
*   **æ–°æ‰‹é˜¶æ®µ**ï¼šAI ä¸»åŠ¨æ€§ (Proactivity) è®¾ä¸º Highã€‚ä¸»åŠ¨æç¤ºæµç¨‹ã€åˆ†é…ä»»åŠ¡ã€‚
*   **ç†Ÿç»ƒé˜¶æ®µ**ï¼šéšç€é¡¹ç›®è¿›åº¦æ¨ç§»ï¼ŒAI è‡ªåŠ¨é™ä½ä¸»åŠ¨æ€§ (Fade-out)ï¼Œè½¬ä¸ºè¢«åŠ¨å“åº”ï¼Œé¼“åŠ±å­¦ç”Ÿè‡ªä¸»è§£å†³é—®é¢˜ã€‚

---

## 4. æŠ€æœ¯æ¶æ„è½åœ°å»ºè®® (Technical Implementation)

### åŠ¨æ€æ¨¡å‹è·¯ç”± (Model Router)
ä¸ºäº†å¹³è¡¡æˆæœ¬ä¸å“åº”é€Ÿåº¦ï¼Œå»ºç«‹åˆ†çº§å¤„ç†æœºåˆ¶ï¼š
*   **L1 (Router)**: ç®€å•çš„æ„å›¾åˆ†ç±»æ¨¡å‹ (å¯ä½¿ç”¨å¾®è°ƒçš„ BERT æˆ– GPT-3.5)ã€‚
*   **L2 (Lightweight)**: é—²èŠã€ç•Œé¢æ“ä½œã€ç®€å•çš„çŠ¶æ€å›å¤ -> `gpt-3.5-turbo` æˆ–æœ¬åœ°æ¨¡å‹ã€‚
*   **L3 (Heavyweight)**: å¤æ‚æ¨ç†ã€ä»£ç ç”Ÿæˆã€æ–‡æ¡£åˆ†æ -> `deepseek-chat` (DeepSeek-V3) æˆ– `gpt-4`ã€‚

### ç»“æ„åŒ–è¡ŒåŠ¨ (Structured Actions)
èµ‹äºˆ AI æ“ä½œç³»ç»Ÿçš„èƒ½åŠ› (Function Calling / Tool Use)ï¼š
*   ä¸è¦åªè¯´ "å»ºè®®ä½ ä»¬å»ºä¸€ä¸ªä»»åŠ¡"ï¼Œè€Œæ˜¯ç›´æ¥è¾“å‡ºï¼š
    ```json
    {
      "tool": "kanban.create_task",
      "args": { "title": "æŸ¥é˜… WebSocket åè®®è§„èŒƒ", "assignee": "pending" }
    }
    ```
*   å‰ç«¯æ¥æ”¶åˆ°æŒ‡ä»¤åï¼Œåœ¨ç•Œé¢ä¸Šå¼¹å‡º "AI å»ºè®®åˆ›å»ºä»»åŠ¡ï¼š[æŸ¥é˜…...]ï¼Œæ˜¯å¦ç¡®è®¤ï¼Ÿ" çš„ Toastï¼Œç”¨æˆ·ä¸€é”®ç¡®è®¤å³å¯æ‰§è¡Œã€‚

---

## 5. å»ºè®®å®æ–½è·¯çº¿å›¾

1.  **Phase 3.1 (P2)**: å®ç° **Model Router** å’ŒåŸºç¡€çš„ **è§’è‰² Prompt æ¨¡æ¿**ã€‚
2.  **Phase 3.2 (P2)**: å¼•å…¥ **Behavior Analytics**ï¼Œè®© AI èƒ½è¯»æ‡‚ç”¨æˆ·çš„éè¯­è¨€è¡Œä¸ºã€‚
3.  **Phase 3.3 (P3)**: å®ç° **ä¸»åŠ¨å¹²é¢„ (Proactive Messaging)**ï¼Œæ‰“é€šåç«¯åˆ° Socket.IO çš„æ¨é€é“¾è·¯ã€‚
